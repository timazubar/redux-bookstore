{"version":3,"sources":["components/Pages/CartPage.jsx","components/BookListItem.jsx","actions/index.js","utils/compose.js","components/ErrorIndicator.jsx","components/Spinner/index.js","components/Spinner/Spinner.jsx","components/BookstoreServiceCooperation.jsx","components/withBookstoreService.jsx","components/BookList.jsx","components/ShoppingCartTable.jsx","components/Pages/HomePage.jsx","components/ShopHeader.jsx","components/App.jsx","store.js","services/BookstoreService.jsx","components/ErrorBoundary.jsx","reducers/bookList.js","reducers/shoppingCart.js","reducers/index.js","index.js"],"names":["CartPage","TextContainer","styled","Container","OrderContainer","Author","span","StyledImage","Image","Price","Title","h3","BookListItem","book","onAddedToCart","title","author","price","coverImage","src","rounded","Button","onClick","booksLoaded","newBooks","type","payload","booksRequested","booksError","error","bookAddedToCart","bookId","compose","funcs","comp","reduceRight","wrapped","f","ErrorIndicator","Spinner","class","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","BookList","books","Wrapper","sm","map","StyledCard","key","id","BookListContainer","this","fetchBooks","loading","Component","Col","Card","connect","bookList","dispatch","getBooks","then","data","catch","err","CartButton","CartTotal","StyledTd","td","mapDispatchToProps","onIncrease","onDecrease","onDelete","shoppingCart","items","cartItems","total","orderTotal","Table","bordered","hover","item","idx","count","variant","size","className","StyledBookListWrapper","HomePage","Header","Row","HeaderTitle","Link","Cart","shopHeader","itemsCount","numItems","itemsTotal","to","timeout","StyledMain","path","component","exact","BookstoreService","Promise","resolve","reject","setTimeout","Math","random","Error","ErrorBoundary","state","hasError","setState","children","updateBookList","action","undefined","updateOrder","quantity","find","itemIndex","findIndex","newItem","updateCartItem","updateOrderTotal","updateCartItems","updateNumItems","slice","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","getState","console","log","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.4e0b59f3.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst CartPage = () => {\r\n  return <div>Cart Page</div>;\r\n};\r\n\r\nexport default CartPage;\r\n","import React, { Fragment } from 'react';\r\nimport { Button, Container, Image } from 'react-bootstrap';\r\nimport styled from 'styled-components';\r\n\r\nconst BookListItem = ({ book, onAddedToCart }) => {\r\n  const { title, author, price, coverImage } = book;\r\n  return (\r\n    <Fragment>\r\n      <StyledImage src={coverImage} rounded />\r\n      <TextContainer>\r\n        <Title>{title}</Title>\r\n        <Author>{author}</Author>\r\n      </TextContainer>\r\n      <OrderContainer>\r\n        <Price>{`$${price}`}</Price>\r\n        <Button onClick={onAddedToCart}>Add to cart</Button>\r\n      </OrderContainer>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst TextContainer = styled(Container)`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  margin-top: 2rem;\r\n`;\r\n\r\nconst OrderContainer = styled(Container)`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  margin-top: 2rem;\r\n`;\r\n\r\nconst Author = styled.span`\r\n  font-size: 1.5em;\r\n`;\r\n\r\nconst StyledImage = styled(Image)`\r\n  width: 150px;\r\n  height: auto;\r\n`;\r\n\r\nconst Price = styled.span`\r\n  font-size: 2.5em;\r\n  font-weight: 700;\r\n  margin-bottom: 1rem;\r\n  color: tomato;\r\n`;\r\n\r\nconst Title = styled.h3`\r\n  font-size: 2em;\r\n  font-weight: 700;\r\n`;\r\n\r\nexport default BookListItem;\r\n","const fetchBooks = (bookstoreService) => () => (dispatch) => {\r\n  dispatch(booksRequested());\r\n  bookstoreService\r\n    .getBooks()\r\n    .then((data) => dispatch(booksLoaded(data)))\r\n    .catch((err) => dispatch(booksError(err)));\r\n};\r\n\r\nconst booksLoaded = (newBooks) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_SUCCESS',\r\n    payload: newBooks,\r\n  };\r\n};\r\n\r\nconst booksRequested = () => {\r\n  return {\r\n    type: 'FETCH_BOOKS_REQUEST',\r\n  };\r\n};\r\n\r\nconst booksError = (error) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_FAILURE',\r\n    payload: error,\r\n  };\r\n};\r\n\r\nconst bookAddedToCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_ADDED_TO_CART',\r\n    payload: bookId,\r\n  };\r\n};\r\n\r\nconst bookRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_REMOVED_FROM_CART',\r\n    payload: bookId,\r\n  };\r\n};\r\n\r\nconst allBooksRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n    payload: bookId,\r\n  };\r\n};\r\n\r\nexport {\r\n  fetchBooks,\r\n  bookAddedToCart,\r\n  bookRemovedFromCart,\r\n  allBooksRemovedFromCart,\r\n};\r\n","const compose = (...funcs) => (comp) => {\r\n  return funcs.reduceRight((wrapped, f) => f(wrapped), comp);\r\n};\r\n\r\nexport default compose;\r\n","import React from \"react\";\r\n\r\nconst ErrorIndicator = () => {\r\n  return <div>Error!</div>;\r\n};\r\n\r\nexport default ErrorIndicator;\r\n","import Spinner from './Spinner';\r\nexport default Spinner;\r\n","import React from 'react';\r\n\r\nimport './Spinner.css';\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div class='loadingio-spinner-eclipse-7k34drclubm'>\r\n      <div class='ldio-yb8qduov7ch'>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n","import React from \"react\";\r\n\r\nconst {\r\n  Provider: BookstoreServiceProvider,\r\n  Consumer: BookstoreServiceConsumer,\r\n} = React.createContext();\r\n\r\nexport { BookstoreServiceProvider, BookstoreServiceConsumer };\r\n","import React from \"react\";\r\nimport { BookstoreServiceConsumer } from \"./BookstoreServiceCooperation\";\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n  return (props) => {\r\n    return (\r\n      <BookstoreServiceConsumer>\r\n        {(bookstoreService) => {\r\n          return <Wrapped {...props} bookstoreService={bookstoreService} />;\r\n        }}\r\n      </BookstoreServiceConsumer>\r\n    );\r\n  };\r\n};\r\n\r\nexport default withBookstoreService;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Card, Col } from 'react-bootstrap';\r\nimport styled from 'styled-components';\r\n\r\nimport BookListItem from './BookListItem';\r\nimport { fetchBooks, bookAddedToCart } from '../actions';\r\nimport { compose } from '../utils';\r\nimport ErrorIndicator from './ErrorIndicator';\r\nimport Spinner from './Spinner';\r\nimport withBookstoreService from './withBookstoreService';\r\n\r\nconst BookList = ({ books, onAddedToCart }) => {\r\n  return (\r\n    <Wrapper sm={7}>\r\n      {books.map((book) => {\r\n        return (\r\n          <StyledCard key={book.id}>\r\n            <BookListItem\r\n              book={book}\r\n              onAddedToCart={() => onAddedToCart(book.id)}\r\n            />\r\n          </StyledCard>\r\n        );\r\n      })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nclass BookListContainer extends Component {\r\n  componentDidMount() {\r\n    this.props.fetchBooks();\r\n  }\r\n\r\n  render() {\r\n    const { books, loading, error, onAddedToCart } = this.props;\r\n\r\n    if (loading) {\r\n      return <Spinner />;\r\n    }\r\n\r\n    if (error) {\r\n      return <ErrorIndicator />;\r\n    }\r\n\r\n    return <BookList books={books} onAddedToCart={onAddedToCart} />;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\r\n  return { books, loading, error };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\r\n  return {\r\n    fetchBooks: () => dispatch(fetchBooks(bookstoreService)()),\r\n    onAddedToCart: (id) => dispatch(bookAddedToCart(id)),\r\n  };\r\n};\r\n\r\nconst Wrapper = styled(Col)`\r\n  padding: 0;\r\n`;\r\n\r\nconst StyledCard = styled(Card)`\r\n  flex-direction: row;\r\n  margin: 1rem;\r\n`;\r\n\r\nexport default compose(\r\n  withBookstoreService(),\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer);\r\n","import React from 'react';\r\nimport { Button, Col, Container, Table } from 'react-bootstrap';\r\nimport { connect } from 'react-redux';\r\nimport styled from 'styled-components';\r\n\r\nimport {\r\n  bookAddedToCart,\r\n  bookRemovedFromCart,\r\n  allBooksRemovedFromCart,\r\n} from '../actions';\r\n\r\nconst ShoppingCartTable = ({\r\n  items,\r\n  total,\r\n  onIncrease,\r\n  onDecrease,\r\n  onDelete,\r\n}) => {\r\n  const renderRow = (item, idx) => {\r\n    const { id, title, count, total } = item;\r\n    return (\r\n      <tr key={id}>\r\n        <td>{idx + 1}</td>\r\n        <td>{title}</td>\r\n        <td>{count}</td>\r\n        <td>${total}</td>\r\n        <StyledTd>\r\n          <CartButton\r\n            variant='outline-success'\r\n            size='sm'\r\n            onClick={() => onIncrease(id)}\r\n          >\r\n            <i className='fa fa-plus-square'></i>\r\n          </CartButton>\r\n          <CartButton\r\n            variant='outline-warning'\r\n            size='sm'\r\n            onClick={() => onDecrease(id)}\r\n          >\r\n            <i className='fa fa-minus-square'></i>\r\n          </CartButton>\r\n          <CartButton\r\n            variant='outline-danger'\r\n            size='sm'\r\n            onClick={() => onDelete(id)}\r\n          >\r\n            <i className='fa fa-trash-o'></i>\r\n          </CartButton>\r\n        </StyledTd>\r\n      </tr>\r\n    );\r\n  };\r\n  return (\r\n    <Col sm={5}>\r\n      <h2>Your order</h2>\r\n      <Table bordered hover>\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Item</th>\r\n            <th>Count</th>\r\n            <th>Price</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>{items.map(renderRow)}</tbody>\r\n      </Table>\r\n      <CartTotal>Total: ${total}</CartTotal>\r\n    </Col>\r\n  );\r\n};\r\n\r\nconst CartButton = styled(Button)`\r\n  margin: 0.25rem;\r\n`;\r\n\r\nconst CartTotal = styled(Container)`\r\n  text-align: right;\r\n  font-size: 1.5em;\r\n`;\r\n\r\nconst StyledTd = styled.td`\r\n  display: flex;\r\n`;\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\r\n  return {\r\n    items: cartItems,\r\n    total: orderTotal,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  onIncrease: bookAddedToCart,\r\n  onDecrease: bookRemovedFromCart,\r\n  onDelete: allBooksRemovedFromCart,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\r\n","import React from \"react\";\r\nimport { Container } from \"react-bootstrap\";\r\nimport styled from \"styled-components\";\r\n\r\nimport BookList from \"../BookList\";\r\nimport ShoppingCartTable from \"../ShoppingCartTable\";\r\n\r\nconst HomePage = () => {\r\n  return (\r\n    <StyledBookListWrapper>\r\n      <BookList />\r\n      <ShoppingCartTable />\r\n    </StyledBookListWrapper>\r\n  );\r\n};\r\n\r\nconst StyledBookListWrapper = styled(Container)`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nexport default HomePage;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Row } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\n\r\nconst ShopHeader = ({ itemsCount, itemsTotal }) => {\r\n  return (\r\n    <Header>\r\n      <HeaderTitle to='/redux-bookstore'>Redux Bookstore</HeaderTitle>\r\n      <Cart to='/redux-bookstore/cart'>\r\n        <i className='cart-iron fa fa-shopping-cart' />\r\n        {itemsCount} items (${itemsTotal})\r\n      </Cart>\r\n    </Header>\r\n  );\r\n};\r\n\r\nconst Header = styled(Row)`\r\n  justify-content: space-between;\r\n  margin: 0;\r\n  font-size: 2rem;\r\n`;\r\n\r\nconst HeaderTitle = styled(Link)`\r\n  font-weight: 700;\r\n  color: black;\r\n`;\r\n\r\nconst Cart = styled(Link)`\r\n  color: black;\r\n`;\r\n\r\nconst mapStateToProps = ({ shopHeader: { numItems, total } }) => {\r\n  return {\r\n    itemsCount: numItems,\r\n    itemsTotal: total,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ShopHeader);\r\n","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport { Container } from 'react-bootstrap';\r\nimport styled from 'styled-components';\r\n\r\nimport CartPage from './Pages/CartPage';\r\nimport HomePage from './Pages/HomePage';\r\nimport ShopHeader from './ShopHeader';\r\nimport withBookstoreService from './withBookstoreService';\r\n\r\nconst App = () => {\r\n  return (\r\n    <StyledMain>\r\n      <ShopHeader numItems={0} total={0} />\r\n      <Switch>\r\n        <Route path='/redux-bookstore' component={HomePage} exact />\r\n        <Route path='/redux-bookstore/cart' component={CartPage} />\r\n      </Switch>\r\n    </StyledMain>\r\n  );\r\n};\r\n\r\nconst StyledMain = styled(Container)`\r\n  color: black;\r\n`;\r\n\r\nexport default withBookstoreService()(App);\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\n\r\nimport reducer from './reducers';\r\n\r\nconst logMiddleware = ({ getState }) => (next) => (action) => {\r\n  console.log(action.type, getState());\r\n  return next(action);\r\n};\r\n\r\nconst stringMiddleware = () => (next) => (action) => {\r\n  if (typeof action === 'string') {\r\n    return next({\r\n      type: action,\r\n    });\r\n  }\r\n  return next(action);\r\n};\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  applyMiddleware(thunkMiddleware, stringMiddleware, logMiddleware)\r\n);\r\n\r\nconst delayedActionCreator = (timeout) => (dispatch) => {\r\n  setTimeout(() => {\r\n    dispatch({\r\n      type: 'DELAYED_ACTION',\r\n    });\r\n  }, timeout);\r\n};\r\n\r\nstore.dispatch(delayedActionCreator(2500));\r\n\r\nexport default store;\r\n","export default class BookstoreService {\r\n  data = [\r\n    {\r\n      id: 1,\r\n      title: 'The Black Swan',\r\n      author: 'Nassim Nicholas Taleb',\r\n      price: 10,\r\n      coverImage:\r\n        'https://images-na.ssl-images-amazon.com/images/I/41w4yuUG1mL._SX322_BO1,204,203,200_.jpg',\r\n    },\r\n    {\r\n      id: 2,\r\n      title: 'Antifragile',\r\n      author: 'Nassim Nicholas Taleb',\r\n      price: 12,\r\n      coverImage:\r\n        'https://images-na.ssl-images-amazon.com/images/I/419QSJTZ+bL._SX322_BO1,204,203,200_.jpg',\r\n    },\r\n    {\r\n      id: 3,\r\n      title: 'Skin in the Game',\r\n      author: 'Nassim Nicholas Taleb',\r\n      price: 15,\r\n      coverImage:\r\n        'https://images-na.ssl-images-amazon.com/images/I/41ObAlltSeL._SX328_BO1,204,203,200_.jpg',\r\n    },\r\n  ];\r\n\r\n  getBooks() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        if (Math.random() > 0.99) {\r\n          reject(new Error('err'));\r\n        } else {\r\n          resolve(this.data);\r\n        }\r\n      }, 700);\r\n    });\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport ErrorIndicator from \"./ErrorIndicator\";\r\n\r\nexport default class ErrorBoundary extends Component {\r\n  state = {\r\n    hasError: false,\r\n  };\r\n\r\n  componentDidCatch() {\r\n    this.setState({ hasError: true });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <ErrorIndicator />;\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n","const updateBookList = (state, action) => {\r\n  if (state === undefined) {\r\n    return {\r\n      books: [],\r\n      loading: true,\r\n      error: null,\r\n    };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case \"FETCH_BOOKS_SUCCESS\":\r\n      return {\r\n        books: action.payload,\r\n        loading: false,\r\n        error: null,\r\n      };\r\n\r\n    case \"FETCH_BOOKS_REQUEST\":\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null,\r\n      };\r\n\r\n    case \"FETCH_BOOKS_FAILURE\":\r\n      return {\r\n        books: [],\r\n        loading: false,\r\n        error: action.payload,\r\n      };\r\n\r\n    default:\r\n      return state.bookList;\r\n  }\r\n};\r\n\r\nexport default updateBookList;\r\n","const updateOrder = (state, bookId, quantity) => {\r\n  const {\r\n    bookList: { books },\r\n    shoppingCart: { cartItems, orderTotal },\r\n    shopHeader: { numItems, total },\r\n  } = state;\r\n  const book = books.find(({ id }) => id === bookId);\r\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\r\n  const item = cartItems[itemIndex];\r\n\r\n  const newItem = updateCartItem(book, item, quantity);\r\n\r\n  return {\r\n    orderTotal: updateOrderTotal(book, newItem, orderTotal, quantity),\r\n    cartItems: updateCartItems(cartItems, newItem, itemIndex),\r\n    numItems: updateNumItems(numItems, quantity),\r\n    total: updateOrderTotal(book, newItem, total, quantity),\r\n  };\r\n};\r\n\r\nconst updateCartItems = (cartItems, item, idx) => {\r\n  if (item.count === 0) {\r\n    return [...cartItems.slice(0, idx), ...cartItems.slice(idx + 1)];\r\n  }\r\n\r\n  if (idx === -1) {\r\n    return [...cartItems, item];\r\n  }\r\n\r\n  return [...cartItems.slice(0, idx), item, ...cartItems.slice(idx + 1)];\r\n};\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n  const { id = book.id, count = 0, title = book.title, total = 0 } = item;\r\n\r\n  return {\r\n    id,\r\n    title,\r\n    count: count + quantity,\r\n    total: total + quantity * book.price,\r\n  };\r\n};\r\n\r\nconst updateOrderTotal = (book, item, orderTotal = 0, quantity) => {\r\n  return (orderTotal = orderTotal + book.price * quantity);\r\n};\r\n\r\nconst updateNumItems = (numItems = 0, quantity) => {\r\n  return (numItems = numItems + quantity);\r\n};\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n  if (state === undefined) {\r\n    return {\r\n      cartItems: [],\r\n      orderTotal: 0,\r\n      numItems: 0,\r\n      total: 0,\r\n    };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case 'BOOK_ADDED_TO_CART':\r\n      return updateOrder(state, action.payload, 1);\r\n\r\n    case 'BOOK_REMOVED_FROM_CART':\r\n      return updateOrder(state, action.payload, -1);\r\n\r\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n      const item = state.shoppingCart.cartItems.find(\r\n        ({ id }) => id === action.payload\r\n      );\r\n      return updateOrder(state, action.payload, -item.count);\r\n\r\n    default:\r\n      return state.shoppingCart;\r\n  }\r\n};\r\n\r\nexport default updateShoppingCart;\r\n","import updateBookList from './bookList';\r\nimport updateShoppingCart from './shoppingCart';\r\n\r\nconst reducer = (state, action) => {\r\n  return {\r\n    bookList: updateBookList(state, action),\r\n    shoppingCart: updateShoppingCart(state, action),\r\n    shopHeader: updateShoppingCart(state, action),\r\n  };\r\n};\r\n\r\nexport default reducer;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport App from \"./components/App\";\nimport BookstoreService from \"./services/BookstoreService\";\nimport { BookstoreServiceProvider } from \"./components/BookstoreServiceCooperation\";\nimport ErrorBoundary from \"./components/ErrorBoundary\";\nimport store from \"./store\";\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundary>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundary>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}