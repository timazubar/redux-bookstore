{"version":3,"sources":["actions/index.js","components/ShoppingCartTable.jsx","components/Pages/CartPage.jsx","components/BookListItem.jsx","utils/compose.js","components/ErrorIndicator.jsx","components/Spinner/index.js","components/Spinner/Spinner.jsx","components/BookstoreServiceCooperation.jsx","components/withBookstoreService.jsx","components/BookList.jsx","components/Pages/HomePage.jsx","components/ShopHeader.jsx","components/App.jsx","store.js","services/BookstoreService.jsx","components/ErrorBoundary.jsx","reducers/bookList.js","reducers/shoppingCart.js","reducers/index.js","index.js"],"names":["booksLoaded","newBooks","type","payload","booksRequested","booksError","error","bookAddedToCart","bookId","CartButton","styled","Button","CartTotal","Container","StyledTd","td","mapDispatchToProps","onIncrease","onDecrease","onDelete","connect","shoppingCart","items","cartItems","total","orderTotal","length","Col","Table","bordered","hover","map","item","idx","id","title","count","key","variant","size","onClick","className","CartPage","sm","TextContainer","OrderContainer","Author","span","StyledImage","Image","Price","Title","h3","BookListItem","book","onAddedToCart","author","price","coverImage","src","rounded","compose","funcs","comp","reduceRight","wrapped","f","ErrorIndicator","Spinner","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","BookList","books","Wrapper","StyledCard","BookListContainer","this","fetchBooks","loading","Component","Card","bookList","dispatch","getBooks","then","data","catch","err","StyledBookListWrapper","HomePage","Header","Row","HeaderTitle","Link","Cart","shopHeader","itemsCount","numItems","itemsTotal","to","timeout","StyledMain","path","component","exact","BookstoreService","Promise","resolve","reject","setTimeout","Math","random","Error","ErrorBoundary","state","hasError","setState","children","updateBookList","action","undefined","updateOrder","quantity","find","itemIndex","findIndex","newItem","updateCartItem","updateOrderTotal","updateCartItems","updateNumItems","slice","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","getState","console","log","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.69af74b4.chunk.js","sourcesContent":["const fetchBooks = (bookstoreService) => () => (dispatch) => {\r\n  dispatch(booksRequested());\r\n  bookstoreService\r\n    .getBooks()\r\n    .then((data) => dispatch(booksLoaded(data)))\r\n    .catch((err) => dispatch(booksError(err)));\r\n};\r\n\r\nconst booksLoaded = (newBooks) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_SUCCESS',\r\n    payload: newBooks,\r\n  };\r\n};\r\n\r\nconst booksRequested = () => {\r\n  return {\r\n    type: 'FETCH_BOOKS_REQUEST',\r\n  };\r\n};\r\n\r\nconst booksError = (error) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_FAILURE',\r\n    payload: error,\r\n  };\r\n};\r\n\r\nconst bookAddedToCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_ADDED_TO_CART',\r\n    payload: bookId,\r\n  };\r\n};\r\n\r\nconst bookRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_REMOVED_FROM_CART',\r\n    payload: bookId,\r\n  };\r\n};\r\n\r\nconst allBooksRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n    payload: bookId,\r\n  };\r\n};\r\n\r\nexport {\r\n  fetchBooks,\r\n  bookAddedToCart,\r\n  bookRemovedFromCart,\r\n  allBooksRemovedFromCart,\r\n};\r\n","import React from 'react';\r\nimport { Button, Col, Container, Table } from 'react-bootstrap';\r\nimport { connect } from 'react-redux';\r\nimport styled from 'styled-components';\r\n\r\nimport {\r\n  bookAddedToCart,\r\n  bookRemovedFromCart,\r\n  allBooksRemovedFromCart,\r\n} from '../actions';\r\n\r\nconst ShoppingCartTable = ({\r\n  items,\r\n  total,\r\n  onIncrease,\r\n  onDecrease,\r\n  onDelete,\r\n}) => {\r\n  const renderRow = (item, idx) => {\r\n    const { id, title, count, total } = item;\r\n    return (\r\n      <tr key={id}>\r\n        <td>{idx + 1}</td>\r\n        <td>{title}</td>\r\n        <td>{count}</td>\r\n        <td>${total}</td>\r\n        <StyledTd>\r\n          <CartButton\r\n            variant='outline-success'\r\n            size='sm'\r\n            onClick={() => onIncrease(id)}\r\n          >\r\n            <i className='fa fa-plus-square'></i>\r\n          </CartButton>\r\n          <CartButton\r\n            variant='outline-warning'\r\n            size='sm'\r\n            onClick={() => onDecrease(id)}\r\n          >\r\n            <i className='fa fa-minus-square'></i>\r\n          </CartButton>\r\n          <CartButton\r\n            variant='outline-danger'\r\n            size='sm'\r\n            onClick={() => onDelete(id)}\r\n          >\r\n            <i className='fa fa-trash-o'></i>\r\n          </CartButton>\r\n        </StyledTd>\r\n      </tr>\r\n    );\r\n  };\r\n\r\n  if (items.length === 0) {\r\n    return null;\r\n  } else {\r\n    return (\r\n      <Col>\r\n        <h2>Your order</h2>\r\n        <Table bordered hover>\r\n          <thead>\r\n            <tr>\r\n              <th>#</th>\r\n              <th>Item</th>\r\n              <th>Count</th>\r\n              <th>Price</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{items.map(renderRow)}</tbody>\r\n        </Table>\r\n        <CartTotal>Total: ${total}</CartTotal>\r\n      </Col>\r\n    );\r\n  }\r\n};\r\n\r\nconst CartButton = styled(Button)`\r\n  margin: 0.25rem;\r\n`;\r\n\r\nconst CartTotal = styled(Container)`\r\n  text-align: right;\r\n  font-size: 1.5em;\r\n`;\r\n\r\nconst StyledTd = styled.td`\r\n  display: flex;\r\n`;\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\r\n  return {\r\n    items: cartItems,\r\n    total: orderTotal,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  onIncrease: bookAddedToCart,\r\n  onDecrease: bookRemovedFromCart,\r\n  onDelete: allBooksRemovedFromCart,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\r\n","import React from 'react';\r\n\r\nimport ShoppingCartTable from '../ShoppingCartTable';\r\n\r\nconst CartPage = () => {\r\n  return (\r\n    <div>\r\n      <ShoppingCartTable sm={12} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartPage;\r\n","import React, { Fragment } from 'react';\r\nimport { Button, Container, Image } from 'react-bootstrap';\r\nimport styled from 'styled-components';\r\n\r\nconst BookListItem = ({ book, onAddedToCart }) => {\r\n  const { title, author, price, coverImage } = book;\r\n  return (\r\n    <Fragment>\r\n      <StyledImage src={coverImage} rounded />\r\n      <TextContainer>\r\n        <Title>{title}</Title>\r\n        <Author>{author}</Author>\r\n      </TextContainer>\r\n      <OrderContainer>\r\n        <Price>{`$${price}`}</Price>\r\n        <Button onClick={onAddedToCart}>Add to cart</Button>\r\n      </OrderContainer>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst TextContainer = styled(Container)`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  margin-top: 2rem;\r\n`;\r\n\r\nconst OrderContainer = styled(Container)`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  margin-top: 2rem;\r\n`;\r\n\r\nconst Author = styled.span`\r\n  font-size: 1.5em;\r\n`;\r\n\r\nconst StyledImage = styled(Image)`\r\n  width: 150px;\r\n  height: auto;\r\n`;\r\n\r\nconst Price = styled.span`\r\n  font-size: 2.5em;\r\n  font-weight: 700;\r\n  margin-bottom: 1rem;\r\n  color: tomato;\r\n`;\r\n\r\nconst Title = styled.h3`\r\n  font-size: 2em;\r\n  font-weight: 700;\r\n`;\r\n\r\nexport default BookListItem;\r\n","const compose = (...funcs) => (comp) => {\r\n  return funcs.reduceRight((wrapped, f) => f(wrapped), comp);\r\n};\r\n\r\nexport default compose;\r\n","import React from \"react\";\r\n\r\nconst ErrorIndicator = () => {\r\n  return <div>Error!</div>;\r\n};\r\n\r\nexport default ErrorIndicator;\r\n","import Spinner from './Spinner';\r\nexport default Spinner;\r\n","import React from 'react';\r\n\r\nimport './Spinner.css';\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className='loadingio-spinner-eclipse-7k34drclubm'>\r\n      <div className='ldio-yb8qduov7ch'>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n","import React from \"react\";\r\n\r\nconst {\r\n  Provider: BookstoreServiceProvider,\r\n  Consumer: BookstoreServiceConsumer,\r\n} = React.createContext();\r\n\r\nexport { BookstoreServiceProvider, BookstoreServiceConsumer };\r\n","import React from \"react\";\r\nimport { BookstoreServiceConsumer } from \"./BookstoreServiceCooperation\";\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n  return (props) => {\r\n    return (\r\n      <BookstoreServiceConsumer>\r\n        {(bookstoreService) => {\r\n          return <Wrapped {...props} bookstoreService={bookstoreService} />;\r\n        }}\r\n      </BookstoreServiceConsumer>\r\n    );\r\n  };\r\n};\r\n\r\nexport default withBookstoreService;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Card, Col } from 'react-bootstrap';\r\nimport styled from 'styled-components';\r\n\r\nimport BookListItem from './BookListItem';\r\nimport { fetchBooks, bookAddedToCart } from '../actions';\r\nimport { compose } from '../utils';\r\nimport ErrorIndicator from './ErrorIndicator';\r\nimport Spinner from './Spinner';\r\nimport withBookstoreService from './withBookstoreService';\r\n\r\nconst BookList = ({ books, onAddedToCart }) => {\r\n  return (\r\n    <Wrapper sm={7}>\r\n      {books.map((book) => {\r\n        return (\r\n          <StyledCard key={book.id}>\r\n            <BookListItem\r\n              book={book}\r\n              onAddedToCart={() => onAddedToCart(book.id)}\r\n            />\r\n          </StyledCard>\r\n        );\r\n      })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nclass BookListContainer extends Component {\r\n  componentDidMount() {\r\n    this.props.fetchBooks();\r\n  }\r\n\r\n  render() {\r\n    const { books, loading, error, onAddedToCart } = this.props;\r\n\r\n    if (loading) {\r\n      return <Spinner />;\r\n    }\r\n\r\n    if (error) {\r\n      return <ErrorIndicator />;\r\n    }\r\n\r\n    return <BookList books={books} onAddedToCart={onAddedToCart} />;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\r\n  return { books, loading, error };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\r\n  return {\r\n    fetchBooks: () => dispatch(fetchBooks(bookstoreService)()),\r\n    onAddedToCart: (id) => dispatch(bookAddedToCart(id)),\r\n  };\r\n};\r\n\r\nconst Wrapper = styled(Col)`\r\n  padding: 0;\r\n`;\r\n\r\nconst StyledCard = styled(Card)`\r\n  flex-direction: row;\r\n  margin: 1rem;\r\n`;\r\n\r\nexport default compose(\r\n  withBookstoreService(),\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer);\r\n","import React from \"react\";\r\nimport { Container } from \"react-bootstrap\";\r\nimport styled from \"styled-components\";\r\n\r\nimport BookList from \"../BookList\";\r\nimport ShoppingCartTable from \"../ShoppingCartTable\";\r\n\r\nconst HomePage = () => {\r\n  return (\r\n    <StyledBookListWrapper>\r\n      <BookList />\r\n      <ShoppingCartTable />\r\n    </StyledBookListWrapper>\r\n  );\r\n};\r\n\r\nconst StyledBookListWrapper = styled(Container)`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nexport default HomePage;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Row } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\n\r\nconst ShopHeader = ({ itemsCount, itemsTotal }) => {\r\n  return (\r\n    <Header>\r\n      <HeaderTitle to='/redux-bookstore'>Redux Bookstore</HeaderTitle>\r\n      <Cart to='/redux-bookstore/cart'>\r\n        <i className='cart-iron fa fa-shopping-cart' />\r\n        {itemsCount} items (${itemsTotal})\r\n      </Cart>\r\n    </Header>\r\n  );\r\n};\r\n\r\nconst Header = styled(Row)`\r\n  justify-content: space-between;\r\n  margin: 0;\r\n  font-size: 2rem;\r\n`;\r\n\r\nconst HeaderTitle = styled(Link)`\r\n  font-weight: 700;\r\n  color: black;\r\n`;\r\n\r\nconst Cart = styled(Link)`\r\n  color: black;\r\n`;\r\n\r\nconst mapStateToProps = ({ shopHeader: { numItems, total } }) => {\r\n  return {\r\n    itemsCount: numItems,\r\n    itemsTotal: total,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ShopHeader);\r\n","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport { Container } from 'react-bootstrap';\r\nimport styled from 'styled-components';\r\n\r\nimport CartPage from './Pages/CartPage';\r\nimport HomePage from './Pages/HomePage';\r\nimport ShopHeader from './ShopHeader';\r\nimport withBookstoreService from './withBookstoreService';\r\n\r\nconst App = () => {\r\n  return (\r\n    <StyledMain>\r\n      <ShopHeader numItems={0} total={0} />\r\n      <Switch>\r\n        <Route path='/redux-bookstore' component={HomePage} exact />\r\n        <Route path='/redux-bookstore/cart' component={CartPage} />\r\n      </Switch>\r\n    </StyledMain>\r\n  );\r\n};\r\n\r\nconst StyledMain = styled(Container)`\r\n  color: black;\r\n`;\r\n\r\nexport default withBookstoreService()(App);\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\n\r\nimport reducer from './reducers';\r\n\r\nconst logMiddleware = ({ getState }) => (next) => (action) => {\r\n  console.log(action.type, getState());\r\n  return next(action);\r\n};\r\n\r\nconst stringMiddleware = () => (next) => (action) => {\r\n  if (typeof action === 'string') {\r\n    return next({\r\n      type: action,\r\n    });\r\n  }\r\n  return next(action);\r\n};\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  applyMiddleware(thunkMiddleware, stringMiddleware, logMiddleware)\r\n);\r\n\r\nconst delayedActionCreator = (timeout) => (dispatch) => {\r\n  setTimeout(() => {\r\n    dispatch({\r\n      type: 'DELAYED_ACTION',\r\n    });\r\n  }, timeout);\r\n};\r\n\r\nstore.dispatch(delayedActionCreator(2500));\r\n\r\nexport default store;\r\n","export default class BookstoreService {\r\n  data = [\r\n    {\r\n      id: 1,\r\n      title: 'The Black Swan',\r\n      author: 'Nassim Nicholas Taleb',\r\n      price: 10,\r\n      coverImage:\r\n        'https://images-na.ssl-images-amazon.com/images/I/41w4yuUG1mL._SX322_BO1,204,203,200_.jpg',\r\n    },\r\n    {\r\n      id: 2,\r\n      title: 'Antifragile',\r\n      author: 'Nassim Nicholas Taleb',\r\n      price: 12,\r\n      coverImage:\r\n        'https://images-na.ssl-images-amazon.com/images/I/419QSJTZ+bL._SX322_BO1,204,203,200_.jpg',\r\n    },\r\n    {\r\n      id: 3,\r\n      title: 'Skin in the Game',\r\n      author: 'Nassim Nicholas Taleb',\r\n      price: 15,\r\n      coverImage:\r\n        'https://images-na.ssl-images-amazon.com/images/I/41ObAlltSeL._SX328_BO1,204,203,200_.jpg',\r\n    },\r\n  ];\r\n\r\n  getBooks() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        if (Math.random() > 0.99) {\r\n          reject(new Error('err'));\r\n        } else {\r\n          resolve(this.data);\r\n        }\r\n      }, 1000);\r\n    });\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport ErrorIndicator from \"./ErrorIndicator\";\r\n\r\nexport default class ErrorBoundary extends Component {\r\n  state = {\r\n    hasError: false,\r\n  };\r\n\r\n  componentDidCatch() {\r\n    this.setState({ hasError: true });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <ErrorIndicator />;\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n","const updateBookList = (state, action) => {\r\n  if (state === undefined) {\r\n    return {\r\n      books: [],\r\n      loading: true,\r\n      error: null,\r\n    };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case \"FETCH_BOOKS_SUCCESS\":\r\n      return {\r\n        books: action.payload,\r\n        loading: false,\r\n        error: null,\r\n      };\r\n\r\n    case \"FETCH_BOOKS_REQUEST\":\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null,\r\n      };\r\n\r\n    case \"FETCH_BOOKS_FAILURE\":\r\n      return {\r\n        books: [],\r\n        loading: false,\r\n        error: action.payload,\r\n      };\r\n\r\n    default:\r\n      return state.bookList;\r\n  }\r\n};\r\n\r\nexport default updateBookList;\r\n","const updateOrder = (state, bookId, quantity) => {\r\n  const {\r\n    bookList: { books },\r\n    shoppingCart: { cartItems, orderTotal },\r\n    shopHeader: { numItems, total },\r\n  } = state;\r\n  const book = books.find(({ id }) => id === bookId);\r\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\r\n  const item = cartItems[itemIndex];\r\n\r\n  const newItem = updateCartItem(book, item, quantity);\r\n\r\n  return {\r\n    orderTotal: updateOrderTotal(book, newItem, orderTotal, quantity),\r\n    cartItems: updateCartItems(cartItems, newItem, itemIndex),\r\n    numItems: updateNumItems(numItems, quantity),\r\n    total: updateOrderTotal(book, newItem, total, quantity),\r\n  };\r\n};\r\n\r\nconst updateCartItems = (cartItems, item, idx) => {\r\n  if (item.count === 0) {\r\n    return [...cartItems.slice(0, idx), ...cartItems.slice(idx + 1)];\r\n  }\r\n\r\n  if (idx === -1) {\r\n    return [...cartItems, item];\r\n  }\r\n\r\n  return [...cartItems.slice(0, idx), item, ...cartItems.slice(idx + 1)];\r\n};\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n  const { id = book.id, count = 0, title = book.title, total = 0 } = item;\r\n\r\n  return {\r\n    id,\r\n    title,\r\n    count: count + quantity,\r\n    total: total + quantity * book.price,\r\n  };\r\n};\r\n\r\nconst updateOrderTotal = (book, item, orderTotal = 0, quantity) => {\r\n  return (orderTotal = orderTotal + book.price * quantity);\r\n};\r\n\r\nconst updateNumItems = (numItems = 0, quantity) => {\r\n  return (numItems = numItems + quantity);\r\n};\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n  if (state === undefined) {\r\n    return {\r\n      cartItems: [],\r\n      orderTotal: 0,\r\n      numItems: 0,\r\n      total: 0,\r\n    };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case 'BOOK_ADDED_TO_CART':\r\n      return updateOrder(state, action.payload, 1);\r\n\r\n    case 'BOOK_REMOVED_FROM_CART':\r\n      return updateOrder(state, action.payload, -1);\r\n\r\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n      const item = state.shoppingCart.cartItems.find(\r\n        ({ id }) => id === action.payload\r\n      );\r\n      return updateOrder(state, action.payload, -item.count);\r\n\r\n    default:\r\n      return state.shoppingCart;\r\n  }\r\n};\r\n\r\nexport default updateShoppingCart;\r\n","import updateBookList from './bookList';\r\nimport updateShoppingCart from './shoppingCart';\r\n\r\nconst reducer = (state, action) => {\r\n  return {\r\n    bookList: updateBookList(state, action),\r\n    shoppingCart: updateShoppingCart(state, action),\r\n    shopHeader: updateShoppingCart(state, action),\r\n  };\r\n};\r\n\r\nexport default reducer;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport App from \"./components/App\";\nimport BookstoreService from \"./services/BookstoreService\";\nimport { BookstoreServiceProvider } from \"./components/BookstoreServiceCooperation\";\nimport ErrorBoundary from \"./components/ErrorBoundary\";\nimport store from \"./store\";\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundary>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundary>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}